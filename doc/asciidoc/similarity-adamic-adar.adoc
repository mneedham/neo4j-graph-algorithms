[[algorithms-similarity-adamic-adar]]
= The Adamic Adar algorithm

[abstract]
--
This section describes the Adamic Adar Similarity algorithm in the Neo4j Graph Algorithms library.
--

// tag::introduction[]
link:https://en.wikipedia.org/wiki/Adamic/Adar_index[Adamic Adar similarity] is
// end::introduction[]


[[algorithms-similarity-adamic-adar-context]]
== History and explanation

// tag::explanation[]

Adamic Adar similarity is computed using the following formula:

image::adamic-adar-similarity.png[role="middle"]

where `N(u)` is the set of nodes adjacent to `u`.

Values range between -1 and 1, where -1 is perfectly dissimilar and 1 is perfectly similar.

The library contains a function to calculate similarity between two nodes.

// end::explanation[]

[[algorithms-similarity-cosine-usecase]]
== Use-cases - when to use the Adamic Adar Similarity algorithm

// tag::use-case[]
We can use the Adamic Adar Similarity algorithm to work out the similarity between two nodes.
We might then use the computed similarity as part of a link prediction solution.
// end::use-case[]


[[algorithms-similarity-adamic-adar-sample]]
== Adamic Adar algorithm sample

.The following will create a sample graph:
[source, cypher]
----
include::scripts/similarity-adamic-adar.cypher[tag=create-sample-graph]
----

.The following will return the Adamic Adar similarity of Michael and Karin:
[source, cypher]
----
include::scripts/similarity-adamic-adar.cypher[tag=all-rels]
----

// tag::function[]
.Results
[opts="header",cols="1"]
|===
| `similarity`
| 1.4426950408889634
|===
// end::function[]


We can also compute the similarity between a pair of nodes based on a specific relationship type.

.The following will return the Adamic Adar similarity of Zhen and Arya based only on `FRIENDS` relationships:
[source, cypher]
----
include::scripts/similarity-adamic-adar.cypher[tag=only-friends]
----

// tag::function[]
.Results
[opts="header",cols="1"]
|===
| `similarity`
| 0.0
|===
// end::function[]


[[algorithms-similarity-adamic-adar-syntax]]
== Syntax

.The following will run the algorithm and return the result:
[source, cypher]
----
RETURN algo.similarity.cosine(node1:Node, node2:Node, {
    relationshipQuery: null,
    direction: "BOTH"
})
----


.Parameters
[opts="header",cols="1,1,1,1,4"]
|===
| Name                   | Type    | Default        | Optional | Description
| `node1`                   | Node    | null           | no       | A list of maps of the following structure: `{item: nodeId, categories: [nodeId, nodeId, nodeId]}` or a Cypher query.
| `top`                    | int     | 0              | yes      | The number of similar pairs to return. If `0`, it will return as many as it finds.
| `topK`                   | int     | 0              | yes      | The number of similar values to return per node. If `0`, it will return as many as it finds.
| `similarityCutoff`       | int     | -1             | yes      | The threshold for similarity. Values below this will not be returned.
| `degreeCutoff`           | int     | 0              | yes      | The threshold for the number of items in the `targets` list. If the list contains less than this amount, that node will be excluded from the calculation.
| `skipValue`              | double  | null           | yes      | Value to skip when executing similarity computation.
| `concurrency`            | int     | available CPUs | yes      | The number of concurrent threads.
| `graph`                  | string  | dense          | yes      | The graph name ('dense' or 'cypher').
| `write`                  | boolean | false          | yes      | Indicates whether results should be stored.
| `writeRelationshipType`  | string  | SIMILAR        | yes      | The relationship type to use when storing results.
| `writeProperty`          | string  | score          | yes      | The property to use when storing results.
|===
